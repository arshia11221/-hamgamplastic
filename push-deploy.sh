#!/bin/bash
echo "๐ ุฏุฑ ุญุงู ุงุฑุณุงู ุชุบุฑุงุช ุงุฒ ูพูุดู web ุจู ฺฏุช..."
git add .
git commit -m "auto: deploy from correct web folder"
git push origin main

echo "โ ุงุฑุณุงู ุจู ฺฏุช ุจุง ููููุช ุงูุฌุงู ุดุฏ."
echo "-----------------------------------"
echo "๐ ุฏุฑ ุญุงู ุงุณุชูุฑุงุฑ ุฑู ุณุฑูุฑ (VPS)..."

ssh root@185.213.164.74 << 'EOF'

  # ุจู ูพูุดู ูพุฑูฺู ุฑู ุณุฑูุฑ ุจุฑู (ฺฉู ุงุฒ ฺฏุช ฺฉููู ุดุฏู)
  cd /root/-hamgamplastic

  # ฑ. ฺฉุฏ ุฌุฏุฏ ุฑุง ุงุฒ ฺฏุช ุจฺฏุฑ
  git reset --hard origin/main
  git pull origin main

  # ฒ. ฺฉุงูุชูุฑูุง ูุฏู ุฑุง ุฎุงููุด ฺฉู
  docker compose down --remove-orphans

  # ณ. ฺฉุงูุชูุฑูุง ุฌุฏุฏ ุฑุง ุจุง ฺฉุฏ ุจูโุฑูุฒ ุดุฏู ุจุณุงุฒ ู ุงุฌุฑุง ฺฉู
  echo " ุฏุฑ ุญุงู ุจุงุฒุณุงุฒ ู ุงุฌุฑุง ูุฌุฏุฏ ฺฉุงูุชูุฑูุง ุฏุงฺฉุฑ..."
  docker compose up -d --build --force-recreate

  echo "โ ุงุณุชูุฑุงุฑ ุจุง ููููุช ฺฉุงูู ุดุฏ!"
EOF